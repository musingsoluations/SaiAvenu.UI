<div class="dashboard">
  <div class="card">
    <div class="card-header">
      <h2>Overall Demand Vs Payment</h2>
      <mat-form-field appearance="outline" class="year-selector">
        <mat-label>Year</mat-label>
        <mat-select [(value)]="selectedYear" (selectionChange)="onYearChange($event.value)">
          <mat-option *ngFor="let year of years" [value]="year">
            {{ year }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div *ngIf="isLoadingChartData" class="loading">
      <mat-spinner diameter="40"></mat-spinner>
    </div>
    <app-collection-chart *ngIf="!isLoadingChartData" [chartData]="chartData"></app-collection-chart>
  </div>

  <div class="card">
    <h2>Monthly Expenses</h2>
    <div *ngIf="expenses.length === 0" class="loading">
      <div diameter="40">Nothing to show here. Come back later.</div>
    </div>
    <app-expense-grid *ngIf="expenses.length > 0" [expenses]="expenses"></app-expense-grid>
  </div>

  <div class="card">
    <h2>Your Demand Vs Payment</h2>
    <div *ngIf="isLoadingChartDataSelf" class="loading">
      <mat-spinner diameter="40"></mat-spinner>
    </div>
    <app-collection-chart *ngIf="!isLoadingChartDataSelf" [chartData]="chartDataSelf"></app-collection-chart>
  </div>

  <div class="card">
    <h2>Your Payments</h2>
    <app-user-payments-grid></app-user-payments-grid>
  </div>
</div>
